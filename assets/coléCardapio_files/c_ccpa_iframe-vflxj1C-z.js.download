!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1a2207ee-063b-3947-b790-90455b3bca91")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_notify","./c_core_i18n","./c_dig-components_card_index","./c_dig-foundations_disclosure_index","./c_spectrum_util_raf_throttle","./e_edison","./c_bem","./c_chat_chat_constants","./c_init_data_edison","./c_dotlottie_common_chunk-B7OIQIGJ","./e_core_exception","./c_src_sink_index","./c_lodash-es_lodash","./c_react-use_misc_util","./c_api_v2_routes_restorations_provider","./e_data_modules_stormcrow","./c_api_v2_routes_team_insights_provider","./c_api_v2_unauthed_client","./c_hive_schemas_sharing-request_access_user_events","react-dom","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_pap-events_navigation_select_create_folder_action","react/jsx-runtime","metaserver/static/js/langpack"],(function(e,t,a,n,i,o,l,r,s,d,c,u,m,g,f,p,E,C,_,y,v,h,k,T,b,I,x,P){"use strict";function S(e){return e&&e.__esModule?e:{default:e}}var N,M=S(t);!function(e){e.NotEnrolled="NOT_ENROLLED",e.EnrollmentPendingEmailConfirmation="ENROLLMENT_PENDING_EMAIL_CONFIRMATION",e.EnrollmentPendingAccountConfirmation="ENROLLMENT_PENDING_ACCOUNT_CONFIRMATION",e.EnrolledEmail="ENROLLED_EMAIL",e.EnrolledAccount="ENROLLED_ACCOUNT",e.CrossOriginEnrolled="CROSS_ORIGIN_ENROLLED",e.EnrolledViaCookie="ENROLLED_VIA_COOKIES",e.UnenrollmentPendingEmailUIConfirmation="UNENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.UnenrollmentPendingAccountUIConfirmation="UNENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailUIConfirmation="ENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.EnrollmentPendingAccountUIConfirmation="ENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailVerificationSent="ENROLLMENT_PENDING_EMAIL_VERIFICATION_SENT",e.EnrollmentPendingAccountVerificationSent="ENROLLMENT_PENDING_ACCOUNT_VERIFICATION_SENT"}(N||(N={}));const A=e=>e===a.UserDNSInitState.LOGGED_IN_ENROLLED?N.EnrolledAccount:e===a.UserDNSInitState.LOGGED_IN_EMAIL_PENDING?N.EnrollmentPendingAccountConfirmation:e===a.UserDNSInitState.LOGGED_OUT_ENROLLED?N.EnrolledEmail:e===a.UserDNSInitState.LOGGED_OUT_EMAIL_PENDING?N.EnrollmentPendingEmailConfirmation:e===a.UserDNSInitState.LOGGED_OUT_GPC_ENABLED?N.EnrollmentPendingEmailUIConfirmation:e===a.UserDNSInitState.CROSS_ORIGIN_ENROLLED?N.CrossOriginEnrolled:e===a.UserDNSInitState.ENROLLED_VIA_COOKIES?N.EnrolledViaCookie:N.NotEnrolled,O=e=>e===N.EnrollmentPendingEmailVerificationSent||e===N.EnrollmentPendingAccountVerificationSent||e===N.EnrollmentPendingEmailUIConfirmation||e===N.EnrollmentPendingAccountUIConfirmation||e===N.EnrollmentPendingEmailConfirmation||e===N.EnrollmentPendingAccountConfirmation||e===N.EnrolledEmail||e===N.EnrolledAccount||e===N.CrossOriginEnrolled||e===N.EnrolledViaCookie,w=e=>e===N.EnrollmentPendingEmailUIConfirmation||e===N.EnrollmentPendingAccountUIConfirmation,D=(e,t)=>({privacy:t=>M.default.createElement(a.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link",onClick:e,"data-uxa-log":"privacy_consent_banner_privacy_page_link",display:"inline"},t),faq:e=>M.default.createElement(a.Link,{id:"privacy-policy-faq-link",href:"#privacy-policy-faq","data-testid":"privacy-policy-faq-link",onClick:t,"data-uxa-log":"privacy_consent_banner_privacy_policy_faq_link",display:"inline"},e)}),L="ccpa_consent_banner",B="customize_cookies_button",U="accept_all_cookies_button",F="decline_cookies_button",R=e=>{const t=e.width>600,n=e.width<486,o={customizeCookiesText:(l=i.intl).formatMessage({id:"5vOzB7",defaultMessage:"Customize cookies"}),declineButtonText:l.formatMessage({id:"TrrEUN",defaultMessage:"Decline"}),acceptAllButtonText:l.formatMessage({id:"OyAa/t",defaultMessage:"Accept All"}),bodyText:(e,t)=>l.formatMessage({id:"n/7wux",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Privacy Policy FAQs</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...D(e,t)}),niraBodyText:(e,t)=>l.formatMessage({id:"sJIhwW",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Cookie Policy</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...D(e,t)})};var l;let r="medium",s=12;return t?(r="large",s=24):n&&(r="small",s=8),M.default.createElement(a.Box,{id:L,"data-testid":L,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_banner","data-uxa-interactions":"shown click",role:"dialog","aria-modal":"true","aria-label":"Privacy Consent Banner",tabIndex:0,backgroundColor:"Background Base",borderRadius:"Medium",overflow:"hidden"},M.default.createElement(a.Box,null,M.default.createElement(a.Box,{display:"flex",paddingX:"Micro Medium",style:{paddingTop:t?8:12}},t&&M.default.createElement("div",{"data-uxa-log":"privacy_consent_banner_close_button",style:{marginLeft:"auto"}},M.default.createElement(a.IconButton,{variant:"transparent",className:"dig-Modal-close-btn","aria-label":"Close",onClick:()=>e.setBannerVisible(!1)},M.default.createElement(a.UIIcon,{src:a.CloseLine})))),M.default.createElement(a.Box,{style:{paddingInline:t?24:12}},M.default.createElement(a.Text,{size:t?"medium":"small",style:{lineHeight:n?"12px":""}},e.origin.includes("nira.com")?o.niraBodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick):o.bodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick))),M.default.createElement(a.Box,{style:{padding:t?24:12,paddingTop:s}},M.default.createElement(a.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center",direction:n?"vertical":"horizontal"},M.default.createElement(a.Split.Item,{marginRight:n?"0":"auto"},M.default.createElement(a.Button,{id:B,"data-testid":B,"data-uxa-log":"privacy_consent_banner_detailed_view_link",variant:"transparent",size:r,onClick:t=>{e.onCustomizeCookiesClick(t),e.setBannerVisible(!1)},style:{width:"100%"}},o.customizeCookiesText)),M.default.createElement(a.Box,{display:"flex"},M.default.createElement(a.Split.Item,{style:{flex:1}},M.default.createElement(a.Button,{id:F,"data-testid":F,"data-uxa-log":"privacy_consent_banner_decline_all_button",variant:"outline",size:r,onClick:t=>{e.onClick(t,F),e.setBannerVisible(!1)},style:{margin:n?"0":void 0,width:"100%"}},o.declineButtonText)),M.default.createElement(a.Split.Item,{style:{flex:1}},M.default.createElement(a.Button,{id:U,"data-testid":U,"data-uxa-log":"privacy_consent_banner_accept_all_button",variant:"primary",size:r,onClick:t=>{e.onClick(t,U),e.setBannerVisible(!1)},style:{margin:n?"0":void 0,width:"100%"}},o.acceptAllButtonText)))))))},G="ccpa-reentry-popout-container",V="ccpa-reentry-popout-button",q=e=>M.default.createElement(a.Box,{id:G,"data-testid":G,"data-uxa-log":"privacy_consent_reentry_button","data-uxa-interactions":"shown click","data-uxa-hierarchy-group":e.uriForLogging},M.default.createElement("div",{"data-uxa-log":"privacy_consent_reentry_button_into_detailed_view"},M.default.createElement(a.IconButton,{id:V,variant:"filled",onClick:()=>e.onClick(V),style:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"ðŸª"))),z="dns-email",Q=e=>{e?n.Notify.success(i.intl.formatMessage({id:"GxeB5y",defaultMessage:"Success! Email will be sent shortly."})):n.Notify.error(i.intl.formatMessage({id:"ma1TT4",defaultMessage:"Something went wrong! Try again later."}))},H=e=>{const t={getLoggedInDNSSettingsText:e=>{const t=n.formatMessage({id:"oUqEwX",defaultMessage:"Settings are saved for the following accounts"}),a=n.formatMessage({id:"6ydDvV",defaultMessage:"Settings will be saved for the following accounts"});return e?t:a},confirmEmailText:(n=i.intl).formatMessage({id:"s5D/gW",defaultMessage:"Please confirm email"}),resendEmailButtonText:n.formatMessage({id:"DKSsPd",defaultMessage:"Resend verification email"}),emailLabel:n.formatMessage({id:"T5sr0i",defaultMessage:"Settings are saved for"}),emailVerificationText:n.formatMessage({id:"TMKkTU",defaultMessage:"You must confirm your email address to save your preferences. We will send you an email from no-reply@dropbox.com. Open the email and click Confirm Email Address to complete your preference submission."}),optedInBannerText:n.formatMessage({id:"QLRtXw",defaultMessage:"Do not sell or share my personal information is active."}),optedOutBannerText:n.formatMessage({id:"5UKyvi",defaultMessage:'You have successfully unenrolled in CCPA\'s "Do not sell or share my personal information".'})};var n;const o=!((l=e.enrollmentState)!==N.EnrollmentPendingAccountUIConfirmation&&l!==N.EnrollmentPendingEmailUIConfirmation&&l!==N.UnenrollmentPendingAccountUIConfirmation&&l!==N.UnenrollmentPendingEmailUIConfirmation&&l!==N.EnrollmentPendingEmailVerificationSent&&l!==N.EnrollmentPendingAccountVerificationSent);var l;const r=e.gpcEnabled,s=e.enrollmentState===N.EnrollmentPendingEmailVerificationSent||e.enrollmentState===N.EnrollmentPendingAccountVerificationSent,d=new Set([...e.userEmails,...e.verifiedEmails,...e.unverifiedEmails]),c=Array.from(d).join(", "),u=o?"":e.unverifiedEmails.join(", "),m=()=>{var t;a.resendEmail(e.viewer,e.unverifiedEmails,Q,e.appAuthToken,e.loggingContext,null!==(t=e.csrfToken)&&void 0!==t?t:void 0)};let g=null;return e.enrollmentState===N.EnrolledAccount||e.enrollmentState===N.EnrolledEmail||e.enrollmentState===N.EnrollmentPendingAccountVerificationSent||e.enrollmentState===N.EnrollmentPendingAccountConfirmation||e.enrollmentState===N.EnrollmentPendingAccountUIConfirmation||e.enrollmentState===N.UnenrollmentPendingAccountUIConfirmation||e.enrollmentState===N.UnenrollmentPendingEmailUIConfirmation?g=M.default.createElement(a.Stack,{gap:"12"},c&&M.default.createElement(a.Box,null,M.default.createElement(a.Text,null,`${t.getLoggedInDNSSettingsText(!o)}: `),M.default.createElement(a.Text,{isBold:!0},c)),!!u&&!r&&M.default.createElement(M.default.Fragment,null,M.default.createElement(a.Banner,{type:"warning"},M.default.createElement(a.Banner.Message,null,M.default.createElement(a.Text,null,`${t.confirmEmailText}: `),M.default.createElement(a.Text,{isBold:!0},u))),M.default.createElement(a.Button,{variant:"transparent",onClick:m},t.resendEmailButtonText)),w(e.enrollmentState)&&M.default.createElement(a.FormHelperText,null,t.emailVerificationText)):e.enrollmentState===N.EnrollmentPendingEmailVerificationSent||e.enrollmentState===N.EnrollmentPendingEmailUIConfirmation?g=M.default.createElement(a.Stack,{gap:"16"},M.default.createElement(a.Box,null,M.default.createElement(a.FormRow,null,M.default.createElement(a.FormLabel,{htmlFor:"dns-email"},t.emailLabel),M.default.createElement(a.TextInput,{id:z,"data-testid":z,name:z,placeholder:"example@dropbox.com",value:e.email,onChange:t=>e.onEmailChange(t.target.value)})),o&&M.default.createElement(a.FormHelperText,null,t.emailVerificationText))):e.enrollmentState!==N.EnrollmentPendingEmailConfirmation||r||(g=M.default.createElement(a.Stack,{gap:"12"},M.default.createElement(a.Box,null,M.default.createElement(a.Text,null,`${t.confirmEmailText}: `),M.default.createElement(a.Text,{isBold:!0},u)),M.default.createElement(a.Button,{variant:"transparent",onClick:m},t.resendEmailButtonText))),M.default.createElement(M.default.Fragment,null,g,e.isFlowComplete&&M.default.createElement(a.Banner,{type:"attention"},M.default.createElement(a.Banner.Message,null,s?t.optedInBannerText:t.optedOutBannerText)))};a.injectInternalStyle("/static/metaserver/static/js/ccpa_iframe/ccpa_iframe.module.out-vfl5Mnlyj.css",(e=>"._ccpa-iframe_xv1f5_1{background-color:transparent;border:none;bottom:0;left:0;overflow:hidden;position:fixed;z-index:999999}._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:24px;box-shadow:var(--dig-utilities__boxshadow__floating);left:24px;max-width:600px;width:100%}@media (max-width:648px){._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:12px;left:12px;width:calc(100% - 24px)}}._ccpa-iframe_xv1f5_1:not(._banner-visible_xv1f5_11):not(._floating-button_xv1f5_28){display:none;left:-1px}._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:24px;left:0}@media (max-width:648px){._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:12px}}#_ccpa-toggle_xv1f5_1:focus-within{outline:3px solid var(--dig-color__utility__focus-ring);outline-offset:1px}"));const $="_ccpa-iframe_xv1f5_1",j="_banner-visible_xv1f5_11",K="_floating-button_xv1f5_28",W="_ccpa-toggle_xv1f5_1",Y="do_not_sell",J="consent-detailed-view",X="consent-detailed-view-mobile",Z="strictly-necessary-only-button",ee="detailed-view-cancel-button",te="save-preferences-button",ae=e=>{const t=t=>{t.target.classList.contains("dig-Toggle-input")||e.onClick()};return M.default.createElement(l.Accordion.Item,{id:`${e.id}-item`,"data-testid":`${e.id}-item`,itemId:e.id,title:e.title,tabIndex:0,style:{cursor:"pointer"},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t(e)}},M.default.createElement(a.Box,{onClick:t,style:{padding:"12px 16px"}},M.default.createElement(a.Box,{display:"flex",justifyContent:"space-between"},M.default.createElement(a.Box,{display:"flex",alignItems:"center"},M.default.createElement(a.UIIcon,{src:a.ChevronDownLine,size:"small",style:{transform:e.isOpen?"rotate(180deg)":""}}),M.default.createElement(a.Text,{isBold:!!e.boldTitle,style:{marginLeft:8}},e.title)),M.default.createElement(a.Toggle,{id:`${e.id}-toggle`,"data-testid":`${e.id}-toggle`,disabled:e.disabled,isToggled:e.isToggled,"aria-checked":e.isToggled,onChange:t=>e.onChange(t.target.checked),wrapperProps:{htmlFor:`${e.id}-toggle`,id:W,"aria-label":`${e.title} toggle`},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.onChange(!t.target.checked)}}))),M.default.createElement(l.Accordion.Panel,{style:{paddingTop:8}},e.children))};ae.displayName="AccordionItem",a.Modal.setAppElement(document.getElementById("root"));const ne=e=>{const n=e.width<601,r=e.width<486,s={title:(d=i.intl).formatMessage({id:"rmoSqA",defaultMessage:"Update Cookie Preferences"}),dnsTitle:d.formatMessage({id:"B/scGc",defaultMessage:"Do not sell or share my information"}),cookiePreferencesTitle:d.formatMessage({id:"nBH+Cn",defaultMessage:"Cookie Preferences"}),strictlyNecessaryOnlyButtonText:d.formatMessage({id:"lM4asI",defaultMessage:"Strictly necessary only"}),savePreferencesButtonText:d.formatMessage({id:"3lwNvc",defaultMessage:"Save preferences"}),sendVerificationButtonText:d.formatMessage({id:"6cpDJr",defaultMessage:"Send verification"}),descriptionText:(e,t)=>d.formatMessage({id:"OAZ8D0",defaultMessage:"Dropbox uses different categories of cookies to provide, protect, improve, and promote our website and services. Information on these categories and their purposes are described below. For more information please see our <privacy>Privacy Policy</privacy> and <faq>Cookie FAQ page</faq>."},{privacy:t=>M.default.createElement(a.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link","data-uxa-log":"privacy_consent_detailed_view_privacy_page_link",onClick:e,display:"inline"},t),faq:e=>M.default.createElement(a.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link","data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link",onClick:t,display:"inline"},e)}),dnsDescription:e=>d.formatMessage({id:"brKQ8K",defaultMessage:'Do not sell or share my personal data to third-parties when I visit this website. Enabling this option will disable all cookies except for those classified as "strictly necessary". Visit our <button>Cookie FAQ page</button> for more information.'},{button:t=>M.default.createElement(a.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link",onClick:e,"data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link",display:"inline"},t)}),gpcSignalText:(e=!1)=>e?d.formatMessage({id:"FbECDH",defaultMessage:"Global Privacy Control enabled."}):d.formatMessage({id:"F0UTLm",defaultMessage:"Global Privacy Control enabled. Disable to modify cookies."})};var d;const c=(e=>({[a.CookieCategory.StrictlyNecessary]:{title:e.formatMessage({id:"586NPL",defaultMessage:"Strictly Necessary"}),text:e.formatMessage({id:"QNuy/o",defaultMessage:"Cookies that are used to operate the website and services, such as to log you in and keep your account secure."})},[a.CookieCategory.MarketingAdvertising]:{title:e.formatMessage({id:"/ECljr",defaultMessage:"General Marketing and Advertising"}),text:e.formatMessage({id:"0YwibY",defaultMessage:"Cookies that are used by Dropbox and our partners to better understand the types of individuals who are interested in our products and services and how we can promote those services based on that information."})},[a.CookieCategory.SocialMediaAdvertising]:{title:e.formatMessage({id:"adix6u",defaultMessage:"Social Media Advertising"}),text:e.formatMessage({id:"kW6BLx",defaultMessage:"Cookies that are used by Dropbox and our partners to understand the effectiveness of our advertisements on social media services. These cookies also help them understand your advertising preferences so they can more effectively show you our advertisements which are relevant to your interests."})},[a.CookieCategory.Analytics]:{title:e.formatMessage({id:"LhEjYu",defaultMessage:"Analytics"}),text:e.formatMessage({id:"c/zwvz",defaultMessage:"Cookies that help us and our partners understand how our websites are engaged with, such as usage statistics or to reconstruct viewed UI elements, in order to improve and customize our services."})},[a.CookieCategory.PerformanceFunctionality]:{title:e.formatMessage({id:"Avfva4",defaultMessage:"Performance and Functionality"}),text:e.formatMessage({id:"h2qu6c",defaultMessage:"Cookies which help us remember your preferences and settings in order to improve your experience when interacting with our sites and services."})}}))(i.intl),u=O(e.enrollmentState),[m,g]=t.useState(u?Y:""),[f,p]=t.useState(""),[E,C]=t.useState(s.savePreferencesButtonText);let _;_=n?"calc(100vh - 125px)":r?"calc(100vh - 169px)":"calc(100vh - 165px)";const y=t=>{e.onButtonClick(t)},v=t=>{e.onDNSChange(t),t?(g(Y),p(""),e.initEnrollmentState!==N.NotEnrolled||e.loggedIn||C(s.sendVerificationButtonText)):C(s.savePreferencesButtonText)};return e.hideGdpr?M.default.createElement(a.Modal,{id:X,open:!0,fullScreen:!0,"data-testid":X,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},M.default.createElement(a.Modal.Header,{style:{padding:24}},M.default.createElement(a.Modal.Title,{tagName:"h1"},s.dnsTitle)),M.default.createElement(a.Modal.Body,null,M.default.createElement(a.Stack,{gap:"16"},M.default.createElement(a.Box,{display:"flex",flexDirection:"row",style:{gap:32}},M.default.createElement(a.Text,null,s.dnsDescription(e.onCookiesFaqLinkClick)),M.default.createElement(a.Toggle,{id:`${Y}-toggle`,"data-testid":`${Y}-toggle`,"aria-checked":e.gpcEnabled||u,isToggled:e.gpcEnabled||u,wrapperProps:{htmlFor:`${Y}-toggle`,id:W,"aria-label":`${s.dnsTitle} toggle`},onChange:e=>v(e.target.checked),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(!e.target.checked)}})),e.gpcEnabled&&M.default.createElement(a.Banner,{type:"attention"},M.default.createElement(a.Banner.Message,null,s.gpcSignalText(!0))),M.default.createElement(H,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,gpcEnabled:e.gpcEnabled,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,appAuthToken:e.appAuthToken,csrfToken:e.csrfToken,loggingContext:e.loggingContext,onEmailChange:e.handleEmailChange}))),M.default.createElement(a.Modal.Footer,null,M.default.createElement(a.Button,{id:te,"data-testid":te,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:"large",onClick:()=>y(te)},E))):M.default.createElement(a.Modal,{id:J,open:!0,isCentered:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e.onClose,"data-testid":J,contentStyles:{boxShadow:"var(--dig-utilities__boxshadow__floating)"},overlayStyles:{backgroundColor:"rgba(0, 0, 0, 0)"}},M.default.createElement("div",{"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},M.default.createElement("div",{"data-uxa-log":"privacy_consent_detailed_view_cancel_button"},M.default.createElement(a.IconButton,{id:ee,"data-testid":ee,className:"close-btn",variant:"transparent","aria-label":"Close",onClick:()=>y(ee),style:{position:"absolute",top:"8px",right:"8px"}},M.default.createElement(a.UIIcon,{src:a.CloseLine}))),M.default.createElement(a.Modal.Header,{style:{paddingTop:r?12:"",paddingInline:r?16:""}},M.default.createElement(a.Modal.Title,{tagName:"h1"},s.title)),M.default.createElement(a.Modal.Body,{style:{maxHeight:_,paddingInline:r?16:"",overflow:"auto"}},M.default.createElement(a.Stack,{paddingTop:"12",paddingBottom:"24",gap:"24"},M.default.createElement(a.Text,null,s.descriptionText(e.onPrivacyPageLinkClick,e.onCookiesFaqLinkClick)),e.gpcEnabled&&M.default.createElement(a.Banner,{type:"attention"},M.default.createElement(a.Banner.Message,null,s.gpcSignalText())),M.default.createElement(o.CardNamespace,{style:{borderRadius:"var(--dig-radius__medium)"}},M.default.createElement(l.Accordion,{variant:"blades",expandedPanel:m},M.default.createElement(ae,{id:Y,title:s.dnsTitle,boldTitle:!0,onClick:()=>{g((e=>e?"":Y)),p("")},isOpen:!!m,isToggled:e.gpcEnabled||u,disabled:e.gpcEnabled,onChange:v},M.default.createElement(a.Stack,{gap:"20"},M.default.createElement(a.Text,null,s.dnsDescription(e.onCookiesFaqLinkClick)),u&&M.default.createElement(H,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,gpcEnabled:e.gpcEnabled,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,appAuthToken:e.appAuthToken,csrfToken:e.csrfToken,loggingContext:e.loggingContext,onEmailChange:e.handleEmailChange}))))),M.default.createElement(a.Box,null,M.default.createElement(a.Title,{isBold:!0,size:"small"},s.cookiePreferencesTitle),M.default.createElement(o.CardNamespace,{style:{marginTop:12,borderRadius:"var(--dig-radius__medium)"}},M.default.createElement(l.Accordion,{variant:"blades",expandedPanel:f},Object.entries(e.categoryToggles).map((([t,n])=>{const i=t,o=(e=>e.replace(/\s/g,"_"))(i),{title:l,text:r}=c[i];return M.default.createElement(ae,{key:o,id:o,title:l,isOpen:f===o,isToggled:i===a.CookieCategory.StrictlyNecessary||!e.togglesDisabled&&n,disabled:i===a.CookieCategory.StrictlyNecessary||e.togglesDisabled,onClick:()=>(e=>{g(""),p((t=>t===e?"":e))})(o),onChange:t=>e.onCategoryChange(t,i)},M.default.createElement(a.Text,null,r))}))))))),M.default.createElement(a.Modal.Footer,{hasTopBorder:!0,style:{padding:r?16:""}},M.default.createElement(a.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center"},M.default.createElement(a.Split.Item,null,M.default.createElement(a.Button,{id:Z,"data-testid":Z,"data-uxa-log":"privacy_consent_detailed_strictly_necessary_button",disabled:e.buttonsDisabled||u,variant:"opacity",size:r?"medium":"large",onClick:()=>y(Z)},s.strictlyNecessaryOnlyButtonText)),M.default.createElement(a.Split.Item,null,M.default.createElement(a.Button,{id:te,"data-testid":te,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:r?"medium":"large",onClick:()=>y(te)},E))))))},ie={optInSuccess:(oe=i.intl).formatMessage({id:"MURQNI",defaultMessage:"Success! Do not sell or share my personal information is now active."}),optOutSuccess:oe.formatMessage({id:"T6SVre",defaultMessage:"Success! Settings are saved."}),updateFailed:oe.formatMessage({id:"6w278K",defaultMessage:"Something went wrong! Try again later."})};var oe;const le=new URLSearchParams(window.location.search),re=e=>{var i,o,l,s,d;const{viewer:c,dnsState:u,userEmails:m,verifiedEmails:g,unverifiedEmails:f,loggingContext:p,ccpaToken:E,isGpcEnabled:C,csrfToken:_,defaultNonCcpaToggleState:y,appAuthToken:v,openDetailedView:h=!1,platform:k,isInIframe:T=!0,backendPreferences:b}=e,I=t.useRef(null),x=(e=>e===a.UserDNSInitState.LOGGED_IN_ENROLLED||e===a.UserDNSInitState.LOGGED_IN_NOT_ENROLLED||e===a.UserDNSInitState.LOGGED_IN_EMAIL_PENDING)(u),P="true"===le.get(a.QueryParam.Gpc)||C||!!navigator.globalPrivacyControl,S="true"===le.get(a.QueryParam.HideGdpr),D=T?"true"===le.get(a.QueryParam.ShouldAutoOpenOptions):window.location.hash===a.MANAGE_COOKIES_LINK_TAG,B=le.get(a.QueryParam.ThirdPartyUserId),G=le.get(a.QueryParam.ThirdPartySessionId),V=le.get(a.QueryParam.ParentDomainConsentCookie),z=le.get(a.QueryParam.ParentDomainDnsCookie),Q=!!z&&"null"!==z,H=(null===(i=null==k?void 0:k.config)||void 0===i?void 0:i.isDefaultNonCcpaEnabled)||"true"===le.get(a.QueryParam.DefaultNonCcpa),W=T?null!==(o=le.get(a.QueryParam.UriForLogging))&&void 0!==o?o:"":a.getUriForLogging(),Y=(null==k?void 0:k.floatingButtonVisible)||"true"===le.get(a.QueryParam.ShouldShowFloatingButton),J=(null==k?void 0:k.bannerDisabled)||"true"===le.get(a.QueryParam.ShouldDisableBanner)||P||u!==a.UserDNSInitState.UNKNOWN&&u!==a.UserDNSInitState.LOGGED_IN_NOT_ENROLLED&&u!==a.UserDNSInitState.LOGGED_OUT_NOT_ENROLLED,X=T?parseInt(null!==(l=le.get(a.QueryParam.Width))&&void 0!==l?l:"0",10):window.innerWidth,ae=T?decodeURIComponent(null!==(s=le.get(a.QueryParam.Origin))&&void 0!==s?s:window.location.origin):window.location.origin,oe=V?JSON.parse(decodeURIComponent(V)):void 0;let re=Number(null!==(d=le.get(a.QueryParam.LocalCookieExpiredTs))&&void 0!==d?d:0);const se=(null==k?void 0:k.cookieStore)||new a.ConsentCookieStore({}),de=O(A(u));let ce=P||de||T?!!(null==oe?void 0:oe.userInteracted):se.hasUserInteracted();const ue=H&&!ce&&!S&&y&&!de,me=a.getActiveUserApiV2Properties(),ge=!a.isCrossOrigin(le)&&me&&me.id?me.id.toString():B||"",fe=a.isCrossOrigin(le)?G||"":r.getBrowserId(),[pe,Ee]=t.useState(!1);t.useEffect((()=>{const e=(e=>e===N.EnrolledAccount||e===N.EnrollmentPendingAccountConfirmation)(Ne)||(e=>e===N.NotEnrolled)(Ne);let t;return O(Ne)&&e&&We({messageType:a.CCPAOutboundMessageType.dnsEnabled,data:{optInToDNS:!0}}),null!=_&&""!==_&&We({messageType:a.CCPAOutboundMessageType.csrfHandshakeStart,data:{token:_}}),et(Pe,_e,ce)?(tt(),qe(!1)):ce||ge||dt(),t=H&&y?a.DefaultNonCcpaTogglesOn.GateOnDefaultsEnabled:H&&!y?a.DefaultNonCcpaTogglesOn.GateOnDefaultsDisabled:!H&&y?a.DefaultNonCcpaTogglesOn.GateOffDefaultsEnabled:a.DefaultNonCcpaTogglesOn.GateOffDefaultsDisabled,We({messageType:a.CCPAOutboundMessageType.logConsentValues,data:{defaultNonCcpaTogglesOn:t,categories:_e,userInteracted:ce}}),P&&!de&&x&&(Me(N.EnrolledAccount),Ye()),a.isCrossOrigin(le)?vt():a.fetchQueryExperiment("privacy_2025_10_22_unified_consent_gate").then((e=>{var t;e&&"true"===(null===(t=e.apiData)||void 0===t?void 0:t.variant)&&(ge||fe)?vt():(kt(),yt())})).catch((e=>{kt(),yt()})),window.addEventListener("resize",(()=>Ze())),()=>{window.removeEventListener("resize",(()=>Ze()))}}),[]);let Ce=se.initializeCategoriesMap({defaultNonCcpa:H&&ue,hasUserInteracted:ce,categories:T?null==oe?void 0:oe.categories:se.getAllowedCategoriesMap(),isDNSEnrolled:O(A(u))});const _e={...Ce},[ye,ve]=t.useState({..._e}),[he,ke]=t.useState(P||A(u)!==N.NotEnrolled),[Te,be]=t.useState(""),[Ie,xe]=t.useState(!1),[Pe,Se]=t.useState(A(u)),[Ne,Me]=t.useState(Pe),[Ae,Oe]=t.useState(!1),[we,De]=t.useState({}),[Le,Be]=t.useState(!1),[Ue,Fe]=t.useState(X),[Re,Ge]=t.useState(!1),[Ve,qe]=t.useState(!(J||ce||D||P||O(Ne)||ge)),[ze,Qe]=t.useState(D||S||h),[He,$e]=t.useState(Y),[je,Ke]=t.useState(P),We=t.useCallback((e=>{try{window.parent.postMessage({messageType:e.messageType,...e.data||{}},ae)}catch(e){a.reportException({error:e,extra:{isInIframe:T,parentOrigin:ae}})}}),[ae]),Ye=()=>{const e=O(Ne),t=_t(),n=Le?_:void 0;a.submitDNSSettings(c,e,e?mt:gt,v,Te,p,E,n,t)},Je=e=>{var t;if(e.origin===ae)switch(e.data.messageType){case a.CCPAInboundMessageType.dnsSettingsConfirmed:Ye();break;case a.CCPAInboundMessageType.dnsSettingsCancelled:Ke(!1),Me(Pe);break;case a.CCPAInboundMessageType.privacyConsentPageInfo:(e=>{const t={};e.hostname&&(t.hostname=e.hostname),e.foreignSessionId&&(t.foreignSessionId=e.foreignSessionId),e.clientInfo&&(t.clientInfo=e.clientInfo),De(t)})(e.data);break;case a.CCPAInboundMessageType.csrfHandshakeEnd:e.data.token===_&&Be(!0);break;case a.CCPAInboundMessageType.openDetailedView:Qe(!0);break;case a.CCPAInboundMessageType.enableAndShowFloatingButton:$e(!0);break;case a.CCPAInboundMessageType.iframeResize:Fe(e.data.width);break;case a.CCPAInboundMessageType.bannerCheck:if(!Re){const a=e.data.iframeHeight,n=null===(t=document.getElementById(L))||void 0===t?void 0:t.offsetHeight;Ge(!(!n||n!==a))}}};t.useEffect((()=>{T&&(Ve&&!J&&!ze)?setTimeout((()=>{var e;const t=null===(e=document.getElementById(L))||void 0===e?void 0:e.offsetHeight;t&&!Re&&(Ge(!0),We({messageType:a.CCPAOutboundMessageType.iframeBannerCheck,data:{height:t}}))}),100):Ge(!1)}),[Re,Ve,J,ze]),t.useEffect((()=>(window.addEventListener("message",Je),()=>{window.removeEventListener("message",Je)})),[Ne,Te,we,Le]),t.useEffect((()=>{(Ae||P)&&(w(Ne)?We({messageType:a.CCPAOutboundMessageType.dnsPendingEnabled,data:{loggedIn:x}}):(e=>e===N.UnenrollmentPendingEmailUIConfirmation||e===N.UnenrollmentPendingAccountUIConfirmation)(Ne)&&We({messageType:a.CCPAOutboundMessageType.dnsPendingDisabled}))}),[Ne]),t.useEffect((()=>{(Ae||P)&&(Ie?(Ke(!1),We({messageType:a.CCPAOutboundMessageType.dnsEmailValid})):(Ke(!0),We({messageType:a.CCPAOutboundMessageType.dnsEmailInvalid})))}),[Ie]);const Xe=e=>{e===ee?(ve({...Ce}),Me(Pe),Ke(P),ke(P||A(u)!==N.NotEnrolled),be(""),xe(!1)):e===Z?(rt(),ct()):e===te&&(ce=!0,Pe!==Ne?Ye():se.havePreferencesChanged(ye)&&(st(),ct())),Qe(S)},Ze=(e=window.innerWidth)=>{var t;if(T){const e=null===(t=document.getElementById(L))||void 0===t?void 0:t.offsetHeight;Ve&&!J&&!ze&&e&&We({messageType:a.CCPAOutboundMessageType.ccpaIframeResize,data:{height:e}})}else Fe(e)},et=(e,t,a)=>O(e)&&(!se.onlyStrictlyNecessaryConsent(t)||!a),tt=()=>{rt(),ct(!0)},at=(e,t)=>{Oe(!0),ve((a=>({...a,[t]:e})))},nt=(e,t)=>{t===U?(lt(),ct(!0)):t===F&&(rt(),ct(!0)),qe(!1),e.preventDefault(),e.stopPropagation()},it=e=>{e.preventDefault(),e.stopPropagation(),Qe(!0),qe(!1)},ot=t.useCallback((e=>{We({messageType:a.CCPAOutboundMessageType.bodyContentChange,data:{displayState:e}})}),[We]);t.useEffect((()=>{var e,t,n,i,o;const l=Ve&&!J&&!ze,r=He&&(!Ve||J)&&!ze;T?ze?(ot(a.DisplayState.DetailedView),qe(!1),null===(e=I.current)||void 0===e||e.focus()):ot(l?a.DisplayState.Banner:r?a.DisplayState.FloatingButton:a.DisplayState.Nothing):(null===(t=I.current)||void 0===t||t.classList.toggle(K,r),null===(n=I.current)||void 0===n||n.classList.toggle(j,l),We({messageType:a.CCPAOutboundMessageType.displayStateChange,data:{isBannerVisible:l,height:null!==(o=null===(i=I.current)||void 0===i?void 0:i.offsetHeight)&&void 0!==o?o:0}}))}),[ze,Ve,He,J,ot,T,We]);const lt=()=>{ce=!0,Object.values(a.CookieCategory).forEach((e=>{_e[e]=!0})),ve({..._e})},rt=()=>{ce=!0,Object.values(a.CookieCategory).forEach((e=>{_e[e]=e===a.CookieCategory.StrictlyNecessary})),ve({..._e})},st=()=>{Object.values(a.CookieCategory).forEach((e=>{_e[e]=ye[e]}))},dt=()=>{if(!de&&!Q&&!se.getDNSCookie()){const e=new Date;re=se.getExpiredDateFromConsentDate(e).getTime(),We({messageType:a.CCPAOutboundMessageType.updateDefaultNonCcpa,data:{categories:_e,consentDate:e,expiredTs:re}})}},ct=(e=!1,t)=>{const n=new Date;re=t||se.getExpiredDateFromConsentDate(n).getTime(),!t&&pe&&a.collectUserPrivacyPreferences(_e,re,ce,ae,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""}),We({messageType:a.CCPAOutboundMessageType.consentChanged,data:{categories:_e,shouldAvoidReload:e,userInteracted:ce,consentDate:n,expiredTs:re}})},ut=e=>{Oe(!0),ce=!0,e?(rt(),Pe===N.NotEnrolled?x?Me(N.EnrollmentPendingAccountUIConfirmation):(Me(N.EnrollmentPendingEmailUIConfirmation),Ke(!Ie)):Pe===N.EnrolledEmail||Pe===N.EnrollmentPendingEmailConfirmation||Pe===N.CrossOriginEnrolled||Pe===N.EnrolledViaCookie?Me(Pe):Pe!==N.EnrolledAccount&&Pe!==N.EnrollmentPendingAccountConfirmation||Me(Pe)):(Object.values(a.CookieCategory).forEach((e=>{_e[e]=Ce[e]})),ve({...Ce}),Pe===N.EnrolledEmail||Pe===N.EnrollmentPendingEmailConfirmation||Pe===N.CrossOriginEnrolled||Pe===N.EnrolledViaCookie?Me(N.UnenrollmentPendingEmailUIConfirmation):Pe===N.EnrolledAccount||Pe===N.EnrollmentPendingAccountConfirmation?Me(N.UnenrollmentPendingAccountUIConfirmation):Pe===N.NotEnrolled&&Me(N.NotEnrolled),Ke(!1)),ke(e)},mt=e=>{e?n.Notify.success(ie.optInSuccess):n.Notify.error(ie.updateFailed),x?(Me(N.EnrollmentPendingAccountVerificationSent),Se(N.EnrollmentPendingAccountConfirmation)):a.isCrossOrigin(le)?(Me(N.CrossOriginEnrolled),Se(N.CrossOriginEnrolled)):(Me(N.EnrollmentPendingEmailConfirmation),Se(N.EnrollmentPendingEmailConfirmation),f.push(Te)),rt(),st(),We({messageType:a.CCPAOutboundMessageType.dnsEnabled,data:{loggedIn:x,optInToDNS:!0}}),S||ct()},gt=e=>{e?n.Notify.success(ie.optOutSuccess):n.Notify.error(ie.updateFailed),Me(N.NotEnrolled),Se(N.NotEnrolled),We({messageType:a.CCPAOutboundMessageType.dnsDisabled}),f.slice(f.indexOf(Te),1),S||(st(),ct())},ft=e=>{be(e),null!==e.match(/^.+@.+\..+$/)?xe(!0):xe(!1)},pt=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaPrivacyPolicyFaqClick})},Et=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaPrivacyPageClick})},Ct=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaCookieFaqClick})},_t=()=>({opt_in_source:P?a.CCPA_ACTION_SOURCE.GPC_UI:a.CCPA_ACTION_SOURCE.USER_INPUT,opt_in_domain:we.hostname,opt_in_client:we.clientInfo,foreign_session_id:we.foreignSessionId}),yt=()=>{We({messageType:a.CCPAOutboundMessageType.initCallback,data:{categories:_e,userInteracted:ce,cookieStore:se}})},vt=()=>{Ee(!0),Tt()&&yt(),b&&b.apiCallSuccess?ht(b.found,b.categories,b.expiredTs,b.userInteracted,b.apiCallSuccess):a.getUserPrivacyPreferences(ht,ae,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""})},ht=(e,t,n,i,o=!0)=>{(ge||fe)&&a.shouldPushToBackend(re,n,e,de||P,t,_e,ce,i,o)?(a.collectUserPrivacyPreferences(_e,re,ce||i,ae,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""}),yt(),kt()):ge&&a.shouldSyncFromBackend(re,n,e,de||P,ce,i,o)?(ce=i||ce,Object.values(a.CookieCategory).forEach((e=>{_e[e]=t[e]})),Ce={..._e},ve({..._e}),yt(),ct(!0,n)):(Tt()||yt(),ce||(dt(),kt()))},kt=()=>{qe(!(J||ce||D||P||O(Ne)))},Tt=()=>!ge||P||de;return M.default.createElement(a.ThemeProvider,{theme:"vis2023",mode:a.useTheme$1(ae)},(({getThemeProps:e})=>{return M.default.createElement("div",{id:a.CCPA_IFRAME_THEME_PROVIDER_ID,"data-testid":a.CCPA_IFRAME_THEME_PROVIDER_ID,...e()},M.default.createElement("div",{ref:I,id:a.CCPA_IFRAME_ID$1,"data-testid":a.CCPA_IFRAME_ID$1,className:T?"":$},!ze&&Ve&&!J&&M.default.createElement(R,{width:Ue,origin:ae,setBannerVisible:qe,onClick:nt,onCustomizeCookiesClick:it,onPrivacyPageLinkClick:Et,onPrivacyPolicyFaqLinkClick:pt,uriForLogging:W}),!ze&&!Ve&&He&&M.default.createElement(q,{uriForLogging:W,onClick:()=>Qe(!0)}),ze&&M.default.createElement(ne,{viewer:c,width:Ue,gpcEnabled:P,hideGdpr:S,uriForLogging:W,loggedIn:x,initEnrollmentState:Pe,enrollmentState:Ne,userEmails:m,verifiedEmails:g,unverifiedEmails:f,email:Te,handleEmailChange:ft,isFlowComplete:(t=Pe,n=Ne,t!==N.NotEnrolled&&n===N.NotEnrolled||n===N.EnrollmentPendingEmailVerificationSent||n===N.EnrollmentPendingAccountVerificationSent),buttonsDisabled:je,categoryToggles:ye,appAuthToken:v,onClose:()=>Qe(!1),onButtonClick:Xe,onPrivacyPageLinkClick:Et,onCookiesFaqLinkClick:Ct,togglesDisabled:he,onCategoryChange:at,onDNSChange:ut})));var t,n}))};re.displayName="CCPAIFrameInner";const se=e=>{var t;const{viewer:n,isLoading:i}=a.useViewer();return i?null:M.default.createElement(a.CCPAIframeErrorBoundary,{extra:{isInIframe:null===(t=e.isInIframe)||void 0===t||t}},M.default.createElement(re,{...e,viewer:n}))};se.displayName="CCPAIFrameWithoutStyles";const de=a.requireCssWithComponent(se,["/static/metaserver/static/css/dig-components/index.web-vflvGFsSL.css","/static/metaserver/static/css/dig-components/tokens-vfl745RtT.css"]);e.CCPAIFrame=de}));
//# sourceMappingURL=c_ccpa_iframe.js-vfl-ew73d.map

//# debugId=1a2207ee-063b-3947-b790-90455b3bca91