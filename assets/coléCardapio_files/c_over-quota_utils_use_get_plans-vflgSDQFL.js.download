!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5091d0eb-6cc1-3bb4-a5c1-bd30948460a2")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./c_trial-plan-card_components_header","./c_trial-cards_trial-plan-card","./c_spectrum_util_raf_throttle","./e_data_modules_stormcrow","./c_pap-events_navigation_select_create_folder_action"],(function(e,a,t,i,l,o,r,n,s,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var c=u(t);const g=i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),v=i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),f=e=>i.intl.formatMessage({id:"oZoBRB",defaultMessage:"Get {planSize}"},{planSize:e}),m=i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"}),p=i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),_=(e,a)=>i.intl.formatMessage({id:"Ju0e9k",defaultMessage:"You're using <b>{usedBytes} of {quotaBytes}</b> of your free Dropbox storage space. Upgrade to a plan that scales with your work—or your over-quota files may be deleted."},{usedBytes:e,quotaBytes:a,b:e=>c.default.createElement("strong",null,e)}),M=i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),y=i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),C=i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),h=e=>i.intl.formatMessage({id:"QRtV/H",defaultMessage:"<b>Sharing will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),b=i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),w=i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),I=e=>i.intl.formatMessage({id:"+CKpIi",defaultMessage:"Upgrade to view {fileName}"},{fileName:e}),S=e=>i.intl.formatMessage({id:"8t0sN4",defaultMessage:"<b>Preview will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),P=i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),E=i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),U=i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),T=i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"});const A=i.intl.formatMessage({id:"Z6zJXZ",defaultMessage:"Show all plans"}),D=i.intl.formatMessage({id:"YvYJx0",defaultMessage:"Your special savings"}),L=i.intl.formatMessage({id:"5kkHg1",defaultMessage:"Redeem offer"});i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});const V=i.intl.formatMessage({id:"aRx2b4",defaultMessage:"Get more storage to upload your file(s)"}),x=i.intl.formatMessage({id:"VPYpFU",defaultMessage:"Uploading the selected file(s) would put you over your storage limit."});i.intl.formatMessage({id:"EcxI0t",defaultMessage:"Compare plans"});const k="portable-checkout-modal";var N;a.ViewMode=void 0,(N=a.ViewMode||(a.ViewMode={})).Sharing="SHARING",N.Preview="PREVIEW",N.UploadOrCreate="UPLOAD_OR_CREATE",N.UploadNearQuota="UPLOAD_NEAR_QUOTA";const O=e=>{throw new Error(`Unhandled value: ${e}`)};function B(e){if(null==e)return"";const a=new Date(1e3*e);return i.intl.formatDate(a,{year:"numeric",month:"long",day:"numeric"})}const R=l.createDefaultApiv2QueryFn(d.GetSpaceUpsellsRoutes,"get_plans"),F=l.createApiv2Query({nsClient:d.GetSpaceUpsellsRoutes,rpc:"get_plans",queryFn:(...e)=>(...a)=>l.reportExceptionIfRequestFails((async()=>await R(...e)(...a)),["get_plans"])});a.DOWNLOAD_FILE=p,a.MANAGE_FILES=v,a.OVER_QUOTA_DELETION_WARNING=_,a.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP=706,a.PORTABLE_CHECKOUT_MODAL_ID=k,a.PREVIEW_TITLE=I,a.SHARING_ENFORCE_RESTRICTIONS=w,a.SHARING_RESTRICTION_WARNING=h,a.SHARING_RESTRICTION_WARNING_NO_DATE=b,a.UPGRADE=g,a.VIEW_PLANS=m,a.WARNING_BADGE=M,a.getAutoLayoutModalProps=function({viewMode:e,isMobileView:t,fileName:s,quotaUpsellInfo:d,warningMode:u,usedLessThanPlusQuota:g,filePreview:M,planContent:k,quotaUsedBytes:N,quotaAllocatedBytes:R,shouldUseSmallSkus:F,onViewPlansClick:G,onCloseClick:q,onDownloadFileClick:H,onManageFilesClick:W,onGetPlanClick:z}){const Q=function(e,t){switch(e){case a.ViewMode.Sharing:return C;case a.ViewMode.Preview:return I(t||"");case a.ViewMode.UploadOrCreate:return U;case a.ViewMode.UploadNearQuota:return V;default:return O(e)}}(e,s),Y=function(e,t){var i;const l=null===(i=null==t?void 0:t.restrictions)||void 0===i?void 0:i.restrictions_start_time_utc_seconds;switch(e){case a.ViewMode.Sharing:return l?h(B(l)):b;case a.ViewMode.Preview:return l?S(B(l)):P;case a.ViewMode.UploadOrCreate:return T;case a.ViewMode.UploadNearQuota:return x;default:return O(e)}}(e,d),K=function(e){switch(e){case a.ViewMode.Sharing:return w;case a.ViewMode.Preview:return E;case a.ViewMode.UploadOrCreate:return T;case a.ViewMode.UploadNearQuota:return x;default:return O(e)}}(e),Z=void 0!==H&&e===a.ViewMode.Preview&&!u&&(!t||t&&!g),J={title:Q,bannerOptions:{type:u?"warning":"alert",text:u?Y:K,ctaText:Z?p:void 0,ctaOnClick:Z?H:void 0},firstChild:c.default.createElement(c.default.Fragment,null),primaryCtaText:F?A:m,primaryCtaOnClick:G,showCloseButton:u||t,onCloseButtonClick:e=>q(e),width:706,minWidth:706,maxWidth:1200};if(g&&k){const i=function(e,a,t,i,o,r,n){var s,d,u,c,g,f,m;const p={heading:null===(s=null==e?void 0:e.INDIVIDUAL)||void 0===s?void 0:s.advertised_space_short_gb_rounded,productFamily:(null===(d=null==e?void 0:e.INDIVIDUAL)||void 0===d?void 0:d.display_name)||"",eyebrow:n?(null===(u=null==e?void 0:e.INDIVIDUAL)||void 0===u?void 0:u.dropbox_brand_name)+" "+(null===(c=null==e?void 0:e.INDIVIDUAL)||void 0===c?void 0:c.display_name):null===(g=null==e?void 0:e.INDIVIDUAL)||void 0===g?void 0:g.display_name,eyebrowSubtle:!0,primaryCtaText:v,primaryOnClick:r,boldHeading:!0,fillMode:"outline",cardSizeVariant:"narrow-full-height",bullets:a?[]:[[l.CheckmarkLine,(null===(m=null===(f=null==e?void 0:e.INDIVIDUAL)||void 0===f?void 0:f.features)||void 0===m?void 0:m[0])||""]],alternativeToPricingSectionText:y,alternativeToPricingSectionTextSize:n?"medium":"large",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a};return t||(p.quotaIndicatorInfo={usedBytes:i,quotaBytes:o,subtextVerbForm:"imperative",meterColor:"red",textSize:"small"}),p}(k,t,u,N,R,W,F),s=function(e,a,t,i,r,s){var d,u,c,g,v,m,p,_,M,y,C,h,b,w,I,S,P,E,U,T,A,V,x,k,N;let O;if(s){const s={planSelectorName:l.PlanTypes.basicPlus500GB,monthlyBillingByMonth:(null===(d=null==e?void 0:e.BASIC500)||void 0===d?void 0:d.monthly_billing_by_month)||"",annualBillingByMonth:(null===(u=null==e?void 0:e.BASIC500)||void 0===u?void 0:u.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(c=null==e?void 0:e.BASIC500)||void 0===c?void 0:c.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(g=null==e?void 0:e.BASIC500)||void 0===g?void 0:g.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(v=null==e?void 0:e.BASIC500)||void 0===v?void 0:v.display_name)||"",heading:(null===(m=null==e?void 0:e.BASIC500)||void 0===m?void 0:m.advertised_space_short_gb_rounded)||"",eyebrow:(null===(p=null==e?void 0:e.BASIC500)||void 0===p?void 0:p.display_name)||"",eyebrowSubtle:!0,primaryCtaText:L,primaryOnClick:r,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:{...s,priceTextSize:"medium"},bullets:[[l.CheckmarkLine,(null===(M=null===(_=null==e?void 0:e.BASIC500)||void 0===_?void 0:_.features)||void 0===M?void 0:M[0])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!0,recommendationVariant:o.TrialCardRecommendationVariants.PILL,recommendationIcon:l.UpsellFill,recommendedText:D,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(y=null==e?void 0:e.BASIC500)||void 0===y?void 0:y.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(C=null==e?void 0:e.BASIC500)||void 0===C?void 0:C.advertised_space_short_gb_rounded)||"",textSize:"small"})}else{const o={planSelectorName:l.PlanTypes.plus,monthlyBillingByMonth:(null===(h=null==e?void 0:e.PLUS)||void 0===h?void 0:h.monthly_billing_by_month)||"",annualBillingByMonth:(null===(b=null==e?void 0:e.PLUS)||void 0===b?void 0:b.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(w=null==e?void 0:e.PLUS)||void 0===w?void 0:w.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(I=null==e?void 0:e.PLUS)||void 0===I?void 0:I.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(S=null==e?void 0:e.PLUS)||void 0===S?void 0:S.display_name)||"",heading:(null===(P=null==e?void 0:e.PLUS)||void 0===P?void 0:P.advertised_space_short_gb_rounded)||"",eyebrow:(null===(E=null==e?void 0:e.PLUS)||void 0===E?void 0:E.display_name)||"",eyebrowSubtle:!0,primaryCtaText:f((null===(U=null==e?void 0:e.PLUS)||void 0===U?void 0:U.advertised_space_short_gb_rounded)||""),primaryOnClick:r,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:o,bullets:[[l.CheckmarkLine,(null===(A=null===(T=null==e?void 0:e.PLUS)||void 0===T?void 0:T.features)||void 0===A?void 0:A[0])||""],[l.CheckmarkLine,(null===(x=null===(V=null==e?void 0:e.PLUS)||void 0===V?void 0:V.features)||void 0===x?void 0:x[1])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(k=null==e?void 0:e.PLUS)||void 0===k?void 0:k.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(N=null==e?void 0:e.PLUS)||void 0===N?void 0:N.advertised_space_short_gb_rounded)||"",textSize:"small"})}return O}(k,t,u,N,z,F);t?(J.firstChild=c.default.createElement(r.TrialPlanCard,{...s}),J.secondChild=c.default.createElement(r.TrialPlanCard,{...i})):(J.firstChild=c.default.createElement(r.TrialPlanCard,{...i}),J.secondChild=c.default.createElement(r.TrialPlanCard,{...s})),J.centerMobileView=!0,e!==a.ViewMode.Preview||u?J.primaryCtaProps=t?{variant:"transparent"}:{variant:"outline"}:t?(J.primaryCtaProps={variant:"opacity",size:"xlarge",fullWidth:!0,style:{maxWidth:"384px"}},void 0!==H&&(J.secondaryCtaProps={variant:"transparent",size:"large"},J.secondaryCtaText=p,J.secondaryCtaOnClick=H)):(J.firstChild=M,J.secondChild=c.default.createElement(r.TrialPlanCard,{...s}),J.primaryCtaProps={variant:"outline"},J.secondaryCtaText=v,J.secondaryCtaOnClick=W,J.secondaryCtaProps={variant:"transparent"})}else J.firstChild=c.default.createElement(l.Text,null,_(l.format_bytes(i.intl,N),l.format_bytes(i.intl,R))),J.secondaryCtaText=v,J.secondaryCtaOnClick=W,J.primaryCtaProps={variant:"primary"};return J},a.getRestrictionsDateString=B,a.getViewMode=function(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return a.ViewMode.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return a.ViewMode.Preview;case"upload":case"create":case"upload_menu_action_bar":return a.ViewMode.UploadOrCreate;default:return O(e)}},a.openPortableCheckoutModal=a=>{new Promise((function(a,t){e(["./c_checkout_components_portable_checkout_frame"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})).then((async({PortableCheckoutModal:e})=>{l.mountModal(c.default.createElement(i.Provider,{value:i.intl},c.default.createElement(s.QueryClientProvider,{client:l.queryClient},c.default.createElement(e,{...a}))),void 0,k)}))},a.useGetPlans=({planNames:e,revenueContentLocation:a,locale:t=n.getPageLocale(),countryOverride:i=n.getCountryOverride(),enabled:o=!0})=>{var r;const s=a,{isError:d,data:u,isLoading:g,error:v}=F.useQuery({apiArg:{plan_names:e,revenue_content_location:s,locale:t,country_override:i}},{enabled:o});return c.default.useEffect((()=>{var e,t;d?l.UDCL.logEvent("get_plans",{tags:{status:"failed",location:a,errorMessage:(null===(e=null==v?void 0:v.apiError)||void 0===e?void 0:e.summary)||"unknown error"}}):!g&&(null==u?void 0:u.apiData)&&(null===(t=u.apiData)||void 0===t?void 0:t.plans)&&Object.keys(u.apiData.plans).length&&l.UDCL.logEvent("get_plans",{tags:{status:"success",location:a}})}),[u,v,d,a,g]),{plansInfo:null===(r=null==u?void 0:u.apiData)||void 0===r?void 0:r.plans,isLoadingPlansInfo:g,plansInfoError:v}}}));
//# sourceMappingURL=c_over-quota_utils_use_get_plans.js-vfl1jQq1e.map

//# debugId=5091d0eb-6cc1-3bb4-a5c1-bd30948460a2